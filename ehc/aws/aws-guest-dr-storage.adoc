---
sidebar: sidebar 
permalink: ehc/aws/aws-guest-dr-storage.html 
keywords: on premises, on prem, cloud storage, Amazon FSx, Network interface, vm datastore 
summary: NetApp AFF A-Series Systeme bieten eine hochperformante Storage-Infrastruktur mit flexiblen Datenmanagement-Optionen, die für eine Vielzahl von Enterprise-Szenarien Cloud-fähig sind. Bei dieser Lösung haben wir eine ONTAP AFF A300 als unser primäres On-Premises-Storage-System verwendet. 
---
= Storage
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./../../media/


link:aws-guest-dr-networking.html["Früher: Networking."]

NetApp AFF A-Series Systeme bieten eine hochperformante Storage-Infrastruktur mit flexiblen Datenmanagement-Optionen, die für eine Vielzahl von Enterprise-Szenarien Cloud-fähig sind. Bei dieser Lösung haben wir eine ONTAP AFF A300 als unser primäres On-Premises-Storage-System verwendet.

NetApp ONTAP zusammen mit den ONTAP Tools für VMware und SnapCenter wurden bei der Lösung eingesetzt, um umfassende Management- und Backup-Funktionen für Applikationen zu bieten, die eng mit VMware vSphere integriert sind.



== On-Premises

Wir verwendeten ONTAP Storage für die VMware Datenspeicher, die die Virtual Machines und ihre VMDK-Dateien gehostet haben. VMware unterstützt mehrere Storage-Protokolle für verbundene Datastores, und in dieser Lösung haben wir NFS-Volumes für Datastores auf ESXi Hosts genutzt. ONTAP Storage-Systeme unterstützen jedoch alle Protokolle, die von VMware unterstützt werden.

In der folgenden Abbildung sind die VMware Storage-Optionen dargestellt.

image:dr-vmc-aws-image7.png["Fehler: Fehlendes Grafikbild"]

ONTAP Volumes wurden für iSCSI- und über NFS-Gast-verbundenen Storage für unsere Applikations-VMs eingesetzt. Folgende Storage-Protokolle wurden für Applikationsdaten verwendet:

* NFS-Volumes für mit dem Gast verbundene Oracle-Datenbankdateien.
* ISCSI LUNs für mit dem Gast verbundene Microsoft SQL Server-Datenbanken und Transaktionsprotokolle.


|===
| Betriebssystem | Datenbanktyp | Storage-Protokoll | Volume-Beschreibung 


| Windows Server 2019 | SQL Server 2019 | ISCSI | Datenbankdateien 


|  |  | ISCSI | Log-Dateien 


| Oracle Linux 8.5 | Oracle 19c | NFS | Oracle binär 


|  |  | NFS | Oracle Daten 


|  |  | NFS | Oracle Recovery-Dateien 
|===
Außerdem verwendeten wir ONTAP-Storage für das primäre Veeam Backup-Repository und für ein Backup-Ziel für die SnapCenter-Datenbank-Backups.

* SMB-Freigabe für das Veeam Backup Repository.
* SMB-Freigabe als Ziel für die SnapCenter-Datenbank-Backups.




== Cloud-Storage

Diese Lösung umfasst VMware Cloud auf AWS, um Virtual Machines zu hosten, die im Rahmen des Failover-Prozesses wiederhergestellt sind. Ab diesem Text unterstützt VMware vSAN Storage für die Datastores, die VMs und VMDKs hosten.

FSX für ONTAP wird als sekundärer Storage für Applikationsdaten verwendet, die mit SnapCenter und SyncMirror gespiegelt werden. Im Rahmen des Failover-Prozesses wird der FSX für ONTAP-Cluster in den primären Storage umgewandelt und die Datenbankapplikationen können die normale Funktion wieder aufnehmen, die auf dem FSX-Storage-Cluster ausgeführt wird.



=== Einrichtung von Amazon FSX für NetApp ONTAP

Um AWS FSX für NetApp ONTAP mithilfe von Cloud Manager zu implementieren, folgen Sie den Anweisungen unter https://docs.netapp.com/us-en/cloud-manager-fsx-ontap/start/task-getting-started-fsx.html["Dieser Link"^].

Nach der Implementierung von FSX ONTAP ziehen Sie die ONTAP Instanzen vor Ort per Drag-and-Drop in FSX ONTAP, um die Replizierungseinrichtung der Volumes zu starten.

Die folgende Abbildung zeigt unsere FSX ONTAP-Umgebung.

image:dr-vmc-aws-image8.png["Fehler: Fehlendes Grafikbild"]



=== Netzwerkschnittstellen erstellt

FSX für NetApp ONTAP verfügt über vorkonfigurierte Netzwerkschnittstellen zur Verwendung in iSCSI-, NFS-, SMB- und Clusternetzwerken.



=== VM-Datenspeicher-Storage

Das VMware Cloud SDDC verfügt über zwei VSAN-Datastores mit Namen `vsandatastore` Und `workloaddatastore`. Wir haben genutzt `vsandatastore` Für Host-Management-VMs mit eingeschränktem Zugriff auf Cloud-Admin-Berechtigungen. Für Workloads verwendeten wir `workloaddatastore`.

link:aws-guest-dr-compute.html["Weiter: Computing."]
